{
	"projectId": "open-ticket",
	"projectName": "open-ticket",
	"databases": [
		{
			"$id": "ticketing",
			"name": "ticketing"
		}
	],
	"collections": [
		{
			"$id": "users",
			"name": "users",
			"databaseId": "ticketing",
			"enabled": true,
			"documentSecurity": true,
			"$permissions": ["read(\"team:agents\")", "update(\"team:agents\")"],
			"attributes": [
				{
					"key": "name",
					"type": "string",
					"status": "available",
					"required": false,
					"array": false,
					"size": 1000
				},
				{
					"key": "email",
					"type": "string",
					"status": "available",
					"required": true,
					"array": false,
					"format": "email"
				}
			],
			"indexes": []
		},
		{
			"$id": "agents",
			"name": "agents",
			"databaseId": "ticketing",
			"enabled": true,
			"documentSecurity": true,
			"$permissions": ["read(\"users\")"],
			"attributes": [
				{
					"key": "name",
					"type": "string",
					"status": "available",
					"required": false,
					"array": false,
					"size": 1000
				},
				{
					"key": "email",
					"type": "string",
					"status": "available",
					"required": true,
					"array": false,
					"format": "email"
				}
			],
			"indexes": []
		},
		{
			"$id": "replies",
			"name": "replies",
			"databaseId": "ticketing",
			"enabled": true,
			"documentSecurity": true,
			"$permissions": ["create(\"users\")", "read(\"team:agents\")", "update(\"team:agents\")"],
			"attributes": [
				{
					"key": "body",
					"type": "string",
					"status": "available",
					"required": true,
					"array": false,
					"size": 20000
				},
				{
					"key": "public",
					"type": "boolean",
					"status": "available",
					"required": false,
					"array": false,
					"default": true
				},
				{
					"key": "createdBy",
					"type": "relationship",
					"status": "available",
					"required": false,
					"array": false,
					"relatedCollection": "users",
					"relationType": "manyToOne",
					"twoWay": true,
					"twoWayKey": "replies",
					"onDelete": "cascade",
					"side": "parent"
				}
			],
			"indexes": []
		},
		{
			"$id": "tickets",
			"name": "tickets",
			"databaseId": "ticketing",
			"enabled": true,
			"documentSecurity": true,
			"$permissions": [
				"create(\"users\")",
				"read(\"team:agents\")",
				"delete(\"team:agents\")",
				"update(\"team:agents\")"
			],
			"attributes": [
				{
					"key": "subject",
					"type": "string",
					"status": "available",
					"required": false,
					"array": false,
					"size": 265
				},
				{
					"key": "body",
					"type": "string",
					"status": "available",
					"required": true,
					"array": false,
					"size": 1073741824
				},
				{
					"key": "status",
					"type": "string",
					"status": "available",
					"required": false,
					"array": false,
					"format": "enum",
					"elements": ["open", "closed", "pending", "resolved", "new", "in_progress"],
					"default": "new"
				},
				{
					"key": "createdBy",
					"type": "relationship",
					"status": "available",
					"required": false,
					"array": false,
					"relatedCollection": "users",
					"relationType": "manyToOne",
					"twoWay": true,
					"twoWayKey": "tickets",
					"onDelete": "cascade",
					"side": "parent"
				},
				{
					"key": "agent",
					"type": "relationship",
					"status": "available",
					"required": false,
					"array": false,
					"relatedCollection": "agents",
					"relationType": "manyToOne",
					"twoWay": true,
					"twoWayKey": "tickets",
					"onDelete": "cascade",
					"side": "parent"
				},
				{
					"key": "replies",
					"type": "relationship",
					"status": "processing",
					"required": false,
					"array": false,
					"relatedCollection": "replies",
					"relationType": "oneToMany",
					"twoWay": true,
					"twoWayKey": "ticket",
					"onDelete": "cascade",
					"side": "parent"
				},
				{
					"key": "deleted",
					"type": "boolean",
					"status": "available",
					"array": false,
					"default": false,
					"required": false
				}
			],
			"indexes": []
		}
	],
	"teams": [
		{
			"$id": "agents",
			"name": "agents"
		}
	],
	"functions": [
		{
			"$id": "64c0079c0d5623f1cd15",
			"name": "delete_tickets",
			"runtime": "node-16.0",
			"path": "functions/delete_tickets",
			"entrypoint": "src/index.js",
			"ignore": ["node_modules", ".npm"],
			"execute": [],
			"events": [],
			"schedule": "",
			"timeout": 15,
			"variables": {
				"APPWRITE_FUNCTION_ENDPOINT": "http://10.20.100.10/v1",
				"APPWRITE_FUNCTION_API_KEY": "5a108107af4b2fdf44afcdb49880f97c22846692d8874f2263d74044a00250aee779608240754f75f0f62a0097673fb87c24082e8d491ae8c554075a95302d3e224da705c2bea4355f2fd302735b293252a70c80446d19045600801b1e59131d8c354d505ee89a4389dd6fcabf7bffd2961dd1800979a694693d6ebde0631f42"
			}
		},
		{
			"$id": "64c139478f070edbf3b1",
			"name": "create_new_user_on_signup",
			"runtime": "node-16.0",
			"path": "functions/create_new_user_on_signup",
			"entrypoint": "src/index.js",
			"ignore": ["node_modules", ".npm"],
			"execute": [],
			"events": ["users.*.create"],
			"schedule": "",
			"timeout": 15,
			"variables": {
				"APPWRITE_FUNCTION_ENDPOINT": "http://10.20.100.10/v1",
				"APPWRITE_FUNCTION_API_KEY": "5a108107af4b2fdf44afcdb49880f97c22846692d8874f2263d74044a00250aee779608240754f75f0f62a0097673fb87c24082e8d491ae8c554075a95302d3e224da705c2bea4355f2fd302735b293252a70c80446d19045600801b1e59131d8c354d505ee89a4389dd6fcabf7bffd2961dd1800979a694693d6ebde0631f42"
			}
		},
		{
			"$id": "64c13c8a9e3036269a1d",
			"name": "promote_user_to_agent",
			"runtime": "node-16.0",
			"path": "functions/promote_user_to_agent",
			"entrypoint": "src/index.js",
			"ignore": ["node_modules", ".npm"],
			"execute": [],
			"events": ["teams.agents.memberships.*.create"],
			"schedule": "",
			"timeout": 15,
			"variables": {
				"APPWRITE_FUNCTION_ENDPOINT": "http://10.20.100.10/v1",
				"APPWRITE_FUNCTION_API_KEY": "5a108107af4b2fdf44afcdb49880f97c22846692d8874f2263d74044a00250aee779608240754f75f0f62a0097673fb87c24082e8d491ae8c554075a95302d3e224da705c2bea4355f2fd302735b293252a70c80446d19045600801b1e59131d8c354d505ee89a4389dd6fcabf7bffd2961dd1800979a694693d6ebde0631f42"
			}
		},
		{
			"$id": "64c140df2111ee330940",
			"name": "demote_user_from_agent",
			"runtime": "node-16.0",
			"path": "functions/demote_user_from_agent",
			"entrypoint": "src/index.js",
			"ignore": ["node_modules", ".npm"],
			"execute": [],
			"events": ["teams.agents.memberships.*.delete"],
			"schedule": "",
			"timeout": 15,
			"variables": {
				"APPWRITE_FUNCTION_ENDPOINT": "http://10.20.100.10/v1",
				"APPWRITE_FUNCTION_API_KEY": "5a108107af4b2fdf44afcdb49880f97c22846692d8874f2263d74044a00250aee779608240754f75f0f62a0097673fb87c24082e8d491ae8c554075a95302d3e224da705c2bea4355f2fd302735b293252a70c80446d19045600801b1e59131d8c354d505ee89a4389dd6fcabf7bffd2961dd1800979a694693d6ebde0631f42"
			}
		},
		{
			"$id": "64c142514677a38b3136",
			"name": "remove_user_on_deletion",
			"runtime": "node-16.0",
			"path": "functions/remove_user_on_deletion",
			"entrypoint": "src/index.js",
			"ignore": ["node_modules", ".npm"],
			"execute": [],
			"events": ["users.*.delete"],
			"schedule": "",
			"timeout": 15,
			"variables": {
				"APPWRITE_FUNCTION_ENDPOINT": "http://10.20.100.10/v1",
				"APPWRITE_FUNCTION_API_KEY": "5a108107af4b2fdf44afcdb49880f97c22846692d8874f2263d74044a00250aee779608240754f75f0f62a0097673fb87c24082e8d491ae8c554075a95302d3e224da705c2bea4355f2fd302735b293252a70c80446d19045600801b1e59131d8c354d505ee89a4389dd6fcabf7bffd2961dd1800979a694693d6ebde0631f42"
			}
		},
		{
			"$id": "64c15dd03f039310cb56",
			"name": "add_ticket_user_to_reply",
			"runtime": "node-16.0",
			"path": "functions/add_ticket_user_to_reply",
			"entrypoint": "src/index.js",
			"ignore": ["node_modules", ".npm"],
			"execute": [],
			"events": ["databases.ticketing.collections.replies.documents.*.create"],
			"schedule": "",
			"timeout": 15,
			"variables": {
				"APPWRITE_FUNCTION_ENDPOINT": "http://10.20.100.10/v1",
				"APPWRITE_FUNCTION_API_KEY": "5a108107af4b2fdf44afcdb49880f97c22846692d8874f2263d74044a00250aee779608240754f75f0f62a0097673fb87c24082e8d491ae8c554075a95302d3e224da705c2bea4355f2fd302735b293252a70c80446d19045600801b1e59131d8c354d505ee89a4389dd6fcabf7bffd2961dd1800979a694693d6ebde0631f42"
			}
		},
		{
			"$id": "add_new_user",
			"name": "add_new_user",
			"runtime": "node-16.0",
			"path": "functions/add_new_user",
			"entrypoint": "src/index.js",
			"ignore": ["node_modules", ".npm"],
			"execute": ["team:agents"],
			"events": [],
			"schedule": "",
			"timeout": 15,
			"variables": {
				"APPWRITE_FUNCTION_ENDPOINT": "http://10.20.100.10/v1",
				"APPWRITE_FUNCTION_API_KEY": "5a108107af4b2fdf44afcdb49880f97c22846692d8874f2263d74044a00250aee779608240754f75f0f62a0097673fb87c24082e8d491ae8c554075a95302d3e224da705c2bea4355f2fd302735b293252a70c80446d19045600801b1e59131d8c354d505ee89a4389dd6fcabf7bffd2961dd1800979a694693d6ebde0631f42"
			}
		}
	]
}
